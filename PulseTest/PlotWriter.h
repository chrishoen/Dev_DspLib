#pragma once

/*==============================================================================
History writer. 
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include "dspTextFile.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************
// This class is used for debug. It contains a set of input variables
// and writes them to a sample history csv file.

class PlotWriter
{
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // Input variables. 
   float mTime;
   bool mPulseFlag;
   bool mDetectFlag;
   float mY;
   
   // Writer.
   Dsp::CsvFileWriter mCsvFileWriter;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Infrastucture.

   // Constructor,
   PlotWriter();
   bool initialize();
   void finalize();

   // Reset the input variables.
   void resetVars();

   // Write the input variables to the csv history file.
   void doWrite();
   void doWrite1();
   void doWrite2();
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Global instance.

#ifdef _PLOTWRITER_CPP_
   PlotWriter gPlotWriter;
#else
   extern PlotWriter gPlotWriter;
#endif

//******************************************************************************
//******************************************************************************
//******************************************************************************
