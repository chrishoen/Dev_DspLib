#pragma once

/*==============================================================================
Pulse processor.
==========================================================================*/

#include "dspBoundCount.h"
#include "dspSlidingSum.h"
#include "dspFuzzyAlpha.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************


//******************************************************************************
//******************************************************************************
//******************************************************************************
//

class PulseProc
{
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   Dsp::BoundCount mBoundCount;
   Dsp::SlidingSum<int,char,20> mSlidingSum;
   Dsp::FuzzyAlpha mFuzzyAlpha;

   bool mDetectFlag1;
   bool mDetectFlag2;
   bool mDetectFlag3;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Constructor.
   PulseProc();
   void resetVars();
   void initialize();
   void finalize();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Process a pulse.
   void processPulse(bool aPulseFlag);
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Global singular instance.

#ifdef _PULSEPROC_CPP_
         PulseProc gPulseProc;
#else
extern   PulseProc gPulseProc;
#endif

//******************************************************************************
//******************************************************************************
//******************************************************************************

