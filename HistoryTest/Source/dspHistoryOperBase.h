#pragma once

/*==============================================================================
Base class for signal history linear operators.
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include "dspHistory.h"
#include "dspHistoryOperParms.h"

namespace Dsp
{

//******************************************************************************
//******************************************************************************
//******************************************************************************
//******************************************************************************
//******************************************************************************
//******************************************************************************
// This is a base class for signal history linear operators, which are linear
// functions on the set of histories F:H->H.

class HistoryOperBase
{
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Parameters. These are read from a parms file.

   HistoryOperParms mParms;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   double* mC;      // Central difference coefficients.

   // If true then memory has been allocated.
   bool    mMemoryFlag;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Constructor.
   HistoryOperBase();
   ~HistoryOperBase();
   virtual void show();

   // Allocate memory.
   void initialize(HistoryOperParms& aParms);

   // Deallocate memory.
   void finalize();

   // Apply the linear operator from the input to the output. F:X->Y
   virtual void operate(History& aX,History& aY)=0;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Helpers.

   // Create a clone of the source that has the same size and time array,
   // but has a zero value array.
   void createTimeClone(History& aX,History& aY);

};

//******************************************************************************
}//namespace


